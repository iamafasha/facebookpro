{% extends 'post/layout/default.html' %}
{% block posts %}
    <h2>Latest Posts</h2>

    {% if error %}
     <span>{{error.message}}</span>
    {% endif %}
    {% for post in posts %}
        <div class="card">
        <div class="card-header">
            {{ post.author.get_full_name }}
        </div>
        <div class="card-body">
            <p class="card-text">{{post.text}}</p>
        </div>
        {% if post.postmedia_set.count > 0 %}
            <img class="card-img-top" style="max-height:300px;object-fit:cover" src=" {{post.postmedia_set.all.first.image.url}}" alt="Card image cap">
        {% endif %}
        <div class="card-footer">
            <span> <a href=""><i class="fa fa-heart-o" aria-hidden="true"></i></a> {{post.postlike_set.all.count}} &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span>
            <span> <a href=""> <i class="fa fa-comment"></i></a> {{post.comment_set.all.count}}</span>
          </div>
        <div class="card-footer text-muted">
           <span>{{ post.published_date }}</span> 
            <a href="{% url 'sinlge_post' user post.id %}">view post</a>
        </div>
        </div>

        <br/>
        <br/>
    {% endfor %}
{% endblock %}